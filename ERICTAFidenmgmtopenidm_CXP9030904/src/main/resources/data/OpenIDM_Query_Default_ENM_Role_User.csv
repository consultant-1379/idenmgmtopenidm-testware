step,host,command,args,expectedOut,expectedExit,timeout
Verify querying SECURITY_ADMIN in OpenIDM,sc1,curl,"--header ""X-Requested-With: XMLHttpRequest"" -b COOKIE_FILE --cacert /ericsson/tor/data/certificates/sso/ssoserverapache.crt https://HTTPD_HOST_NAME/openidm/managed/role/SECURITY_ADMIN","""roleName"":""SECURITY_ADMIN""",0,10000
Verify querying ADMINISTRATOR in OpenIDM,sc1,curl,"--header ""X-Requested-With: XMLHttpRequest"" -b COOKIE_FILE --cacert /ericsson/tor/data/certificates/sso/ssoserverapache.crt https://HTTPD_HOST_NAME/openidm/managed/role/ADMINISTRATOR","""roleName"":""ADMINISTRATOR""",0,10000
Verify querying OPERATOR in OpenIDM,sc1,curl,"--header ""X-Requested-With: XMLHttpRequest"" -b COOKIE_FILE --cacert /ericsson/tor/data/certificates/sso/ssoserverapache.crt https://HTTPD_HOST_NAME/openidm/managed/role/OPERATOR","""roleName"":""OPERATOR""",0,10000
Verify querying FIELD_TECHNICIAN in OpenIDM,sc1,curl,"--header ""X-Requested-With: XMLHttpRequest"" -b COOKIE_FILE --cacert /ericsson/tor/data/certificates/sso/ssoserverapache.crt https://HTTPD_HOST_NAME/openidm/managed/role/FIELD_TECHNICIAN","""roleName"":""FIELD_TECHNICIAN""",0,10000
Verify querying SECURITY_ADMIN role in OpenDJ from SC1,sc1,ldapsearch,"-p 1636 --useSSL --trustAll -D ""cn=directory manager"" -w OPENDJ_ADMIN_PASSWORD -b ""ou=roles,COM_INF_LDAP_ROOT_SUFFIX"" cn=SECURITY_ADMIN","description: This is the ENM SECURITY_ADMIN Default Role",0,10000
Verify querying ADMINISTRATOR role in OpenDJ from SC1,sc1,ldapsearch,"-p 1636 --useSSL --trustAll -D ""cn=directory manager"" -w OPENDJ_ADMIN_PASSWORD -b ""ou=roles,COM_INF_LDAP_ROOT_SUFFIX"" cn=ADMINISTRATOR","description: This is the ENM ADMINISTRATOR Default Role",0,10000
Verify querying OPERATOR role in OpenDJ,sc1,ldapsearch,"-p 1636 --useSSL --trustAll -D ""cn=directory manager"" -w OPENDJ_ADMIN_PASSWORD -b ""ou=roles,COM_INF_LDAP_ROOT_SUFFIX"" cn=OPERATOR","description: This is the ENM OPERATOR Default Role",0,10000
Verify querying FIELD_TECHNICIAN role in OpenDJ,sc1,ldapsearch,"-p 1636 --useSSL --trustAll -D ""cn=directory manager"" -w OPENDJ_ADMIN_PASSWORD -b ""ou=roles,COM_INF_LDAP_ROOT_SUFFIX"" cn=FIELD_TECHNICIAN","description: This is the ENM FIELD_TECHNICIAN Default Role",0,10000
Verify Querying SECURITY_ADMIN user[administrator] ,sc1,curl,"--header ""X-Requested-With: XMLHttpRequest"" -b COOKIE_FILE --cacert /ericsson/tor/data/certificates/sso/ssoserverapache.crt --request GET  ""https://HTTPD_HOST_NAME/openidm/managed/user/administrator""","""userName"":""administrator""",0,10000
Verify if the SECURITY_ADMIN user[administrator] is created in openDJ,sc1,ldapsearch,"-p 1636 --useSSL --trustAll -D ""cn=directory manager"" -w OPENDJ_ADMIN_PASSWORD -b ""ou=people,COM_INF_LDAP_ROOT_SUFFIX"" uid=administrator","dn: uid=administrator,ou=People",0,10000
Verify if administrator being assigned to SECURITY_ADMIN role in OpenIDM,sc1,curl,"--header ""X-Requested-With: XMLHttpRequest"" -b COOKIE_FILE --cacert /ericsson/tor/data/certificates/sso/ssoserverapache.crt https://HTTPD_HOST_NAME/openidm/managed/role/SECURITY_ADMIN","administrator",0,10000
Verify if administrator being assigned to SECURITY_ADMIN role in OpenDJ,sc1,ldapsearch,"-p 1636 --useSSL --trustAll -D ""cn=directory manager"" -w OPENDJ_ADMIN_PASSWORD -b ""ou=roles,COM_INF_LDAP_ROOT_SUFFIX"" cn=SECURITY_ADMIN","uniqueMember: uid=administrator,ou=People",0,10000
Verify if administrator being assigned to ADMINISTRATOR role in OpenIDM,sc1,curl,"--header ""X-Requested-With: XMLHttpRequest"" -b COOKIE_FILE --cacert /ericsson/tor/data/certificates/sso/ssoserverapache.crt https://HTTPD_HOST_NAME/openidm/managed/role/ADMINISTRATOR","administrator",0,10000
Verify if administrator being assigned to ADMINISTRATOR role in OpenDJ from SC1,sc1,ldapsearch,"-p 1636 --useSSL --trustAll -D ""cn=directory manager"" -w OPENDJ_ADMIN_PASSWORD -b ""ou=roles,COM_INF_LDAP_ROOT_SUFFIX"" cn=ADMINISTRATOR","uniqueMember: uid=administrator,ou=People",0,10000
Verify if administrator being a member of SECURITY_ADMIN in OpenIDM,sc1,curl,"--header ""X-Requested-With: XMLHttpRequest"" -b COOKIE_FILE --cacert /ericsson/tor/data/certificates/sso/ssoserverapache.crt https://HTTPD_HOST_NAME/openidm/managed/user/administrator","SECURITY_ADMIN",0,10000
Verify if administrator being a member of ADMINISTRATOR in OpenIDM,sc1,curl,"--header ""X-Requested-With: XMLHttpRequest"" -b COOKIE_FILE --cacert /ericsson/tor/data/certificates/sso/ssoserverapache.crt https://HTTPD_HOST_NAME/openidm/managed/user/administrator","ADMINISTRATOR",0,10000
Verify Create a user admin1 in openIDM,sc1,curl,"--header ""X-Requested-With: XMLHttpRequest"" -b COOKIE_FILE --cacert /ericsson/tor/data/certificates/sso/ssoserverapache.crt --request PUT --data '{""userName"":""admin1"", ""firstName"":""admin1"", ""lastName"":""admin"", ""email"":""admin1@example.com"", ""password"":""TestPassw0rd"", ""userType"":""enmUser"", ""status"":""Enabled""}' https://HTTPD_HOST_NAME/openidm/managed/user/admin1","{""_id"":""admin1"",""_rev"":""0""}",0,10000
Verify if user admin1 is created in openDJ,sc1,ldapsearch,"-p 1636 --useSSL --trustAll -D ""cn=directory manager"" -w OPENDJ_ADMIN_PASSWORD -b ""ou=people,COM_INF_LDAP_ROOT_SUFFIX"" uid=admin1","dn: uid=admin1,ou=People",0,10000
Verify Create a user admin2 in openIDM,sc1,curl,"--header ""X-Requested-With: XMLHttpRequest"" -b COOKIE_FILE --cacert /ericsson/tor/data/certificates/sso/ssoserverapache.crt --request PUT --data '{""userName"":""admin2"", ""firstName"":""admin2"", ""lastName"":""admin"", ""email"":""admin2@example.com"", ""password"":""TestPassw0rd"", ""userType"":""enmUser"", ""status"":""Enabled""}' https://HTTPD_HOST_NAME/openidm/managed/user/admin2","{""_id"":""admin2"",""_rev"":""0""}",0,10000
Verify if user admin2 is created in openDJ,sc1,ldapsearch,"-p 1636 --useSSL --trustAll -D ""cn=directory manager"" -w OPENDJ_ADMIN_PASSWORD -b ""ou=people,COM_INF_LDAP_ROOT_SUFFIX"" uid=admin2","dn: uid=admin2,ou=People",0,10000
Change admin1 and admin2's password reset states to false in openIDM,sc1,curl,"-b COOKIE_FILE --cacert /ericsson/tor/data/certificates/sso/ssoserverapache.crt --header ""X-Requested-With: XMLHttpRequest"" --request POST -d '[""admin1"",""admin2""]' ""https://HTTPD_HOST_NAME/openidm/endpoint/passwordReset?state=false""","""_id"":""admin2""",0,10000
Verify assigning admin1 to SECURITY_ADMIN role,sc1,curl,"--header ""X-Requested-With: XMLHttpRequest"" --header ""X-Usernames: admin1"" -b COOKIE_FILE --cacert /ericsson/tor/data/certificates/sso/ssoserverapache.crt --request GET ""https://HTTPD_HOST_NAME/openidm/endpoint/manageRole?action=adduser&rName=SECURITY_ADMIN""","""_id"":""SECURITY_ADMIN"",""_rev""",0,10000
Verify removing administrator from SECURITY_ADMIN role,sc1,curl,"--header ""X-Requested-With: XMLHttpRequest"" --header ""X-Usernames: administrator"" -b COOKIE_FILE --cacert /ericsson/tor/data/certificates/sso/ssoserverapache.crt --request GET ""https://HTTPD_HOST_NAME/openidm/endpoint/manageRole?action=deleteuser&rName=SECURITY_ADMIN""",""User: administrator cannot be removed from role: SECURITY_ADMIN"",0,10000
Verify if administrator still being assigned to SECURITY_ADMIN role in OpenIDM,sc1,curl,"--header ""X-Requested-With: XMLHttpRequest"" -b COOKIE_FILE --cacert /ericsson/tor/data/certificates/sso/ssoserverapache.crt https://HTTPD_HOST_NAME/openidm/managed/role/SECURITY_ADMIN","administrator",0,10000
Verify if administrator still being assigned to SECURITY_ADMIN role in OpenDJ,sc1,ldapsearch,"-p 1636 --useSSL --trustAll -D ""cn=directory manager"" -w OPENDJ_ADMIN_PASSWORD -b ""ou=roles,COM_INF_LDAP_ROOT_SUFFIX"" cn=SECURITY_ADMIN","uniqueMember: uid=administrator,ou=People",0,10000
Verify if admin1 being assigned to SECURITY_ADMIN role in OpenIDM,sc1,curl,"--header ""X-Requested-With: XMLHttpRequest"" -b COOKIE_FILE --cacert /ericsson/tor/data/certificates/sso/ssoserverapache.crt https://HTTPD_HOST_NAME/openidm/managed/role/SECURITY_ADMIN","admin1",0,10000
Verify if admin1 being assigned to SECURITY_ADMIN role in OpenDJ,sc1,ldapsearch,"-p 1636 --useSSL --trustAll -D ""cn=directory manager"" -w OPENDJ_ADMIN_PASSWORD -b ""ou=roles,COM_INF_LDAP_ROOT_SUFFIX"" cn=SECURITY_ADMIN","uniqueMember: uid=admin1,ou=People",0,10000
Obtain a cookie for admin1 before query operation,sc1,curl,"-c /tmp/admin1Cookie.txt --cacert /ericsson/tor/data/certificates/sso/ssoserverapache.crt -X POST ""https://HTTPD_HOST_NAME/login"" -d IDToken1=admin1 -d IDToken2=TestPassw0rd","",0,10000
Verify if admin1 has access to query a user in OpenIDM,sc1,curl,"--header ""X-Requested-With: XMLHttpRequest"" -b /tmp/admin1Cookie.txt --cacert /ericsson/tor/data/certificates/sso/ssoserverapache.crt --request GET ""https://HTTPD_HOST_NAME/openidm/managed/user/admin2""","""userName"":""admin2""",0,10000
Verify assigning admin2 to SECURITY_ADMIN role,sc1,curl,"--header ""X-Requested-With: XMLHttpRequest"" --header ""X-Usernames: admin2"" -b COOKIE_FILE --cacert /ericsson/tor/data/certificates/sso/ssoserverapache.crt --request GET ""https://HTTPD_HOST_NAME/openidm/endpoint/manageRole?action=adduser&rName=SECURITY_ADMIN""","""_id"":""SECURITY_ADMIN"",""_rev""",0,10000
Verify removing admin1 from SECURITY_ADMIN role,sc1,curl,"--header ""X-Requested-With: XMLHttpRequest"" --header ""X-Usernames: admin1"" -b COOKIE_FILE --cacert /ericsson/tor/data/certificates/sso/ssoserverapache.crt --request GET ""https://HTTPD_HOST_NAME/openidm/endpoint/manageRole?action=deleteuser&rName=SECURITY_ADMIN""","""_id"":""SECURITY_ADMIN"",""_rev""",0,10000
Verify if admin2 being assigned to SECURITY_ADMIN role in OpenIDM from SC-1,sc1,curl,"--header ""X-Requested-With: XMLHttpRequest"" -b COOKIE_FILE --cacert /ericsson/tor/data/certificates/sso/ssoserverapache.crt https://HTTPD_HOST_NAME/openidm/managed/role/SECURITY_ADMIN","admin2",0,10000
Verify if admin2 being assigned to SECURITY_ADMIN role in OpenDJ,sc1,ldapsearch,"-p 1636 --useSSL --trustAll -D ""cn=directory manager"" -w OPENDJ_ADMIN_PASSWORD -b ""ou=roles,COM_INF_LDAP_ROOT_SUFFIX"" cn=SECURITY_ADMIN","uniqueMember: uid=admin2,ou=People",0,10000
Verify if admin1 doesn't have access to query a user in OpenIDM,sc1,curl,"--header ""X-Requested-With: XMLHttpRequest"" -b /tmp/admin1Cookie.txt --cacert /ericsson/tor/data/certificates/sso/ssoserverapache.crt --request GET  ""https://HTTPD_HOST_NAME/openidm/managed/user/admin2""","Access denied",0,10000
Obtain a cookie for admin2 before query operation on sc1,sc1,curl,"-c /tmp/admin2Cookie.txt --cacert /ericsson/tor/data/certificates/sso/ssoserverapache.crt -X POST ""https://HTTPD_HOST_NAME/login"" -d IDToken1=admin2 -d IDToken2=TestPassw0rd","",0,10000
Verify if admin2 has access to query a user in OpenIDM,sc1,curl,"--header ""X-Requested-With: XMLHttpRequest"" -b /tmp/admin2Cookie.txt --cacert /ericsson/tor/data/certificates/sso/ssoserverapache.crt --request GET  ""https://HTTPD_HOST_NAME/openidm/managed/user/admin1""","""userName"":""admin1""",0,10000
Verify removing admin2 from SECURITY_ADMIN role,sc1,curl,"--header ""X-Requested-With: XMLHttpRequest"" --header ""X-Usernames: admin2"" -b COOKIE_FILE --cacert /ericsson/tor/data/certificates/sso/ssoserverapache.crt --request GET ""https://HTTPD_HOST_NAME/openidm/endpoint/manageRole?action=deleteuser&rName=SECURITY_ADMIN""","""_id"":""SECURITY_ADMIN"",""_rev""",0,10000
Verify assigning non-existing user along with admin2 to SECURITY_ADMIN role,sc1,curl,"--header ""X-Requested-With: XMLHttpRequest"" --header ""X-Usernames: admin2,admin333"" -b COOKIE_FILE --cacert /ericsson/tor/data/certificates/sso/ssoserverapache.crt --request GET ""https://HTTPD_HOST_NAME/openidm/endpoint/manageRole?action=adduser&rName=SECURITY_ADMIN""","User admin333 does not exist",0,10000
Verify if admin2 doesn't have access to query a user in OpenIDM,sc1,curl,"--header ""X-Requested-With: XMLHttpRequest"" -b /tmp/admin2Cookie.txt --cacert /ericsson/tor/data/certificates/sso/ssoserverapache.crt --request GET  ""https://HTTPD_HOST_NAME/openidm/managed/user/admin1""","Access denied",0,10000
Verify removing administrator from SECURITY_ADMIN role,sc1,curl,"--header ""X-Requested-With: XMLHttpRequest"" --header ""X-Usernames: administrator"" -b COOKIE_FILE --cacert /ericsson/tor/data/certificates/sso/ssoserverapache.crt --request GET ""https://HTTPD_HOST_NAME/openidm/endpoint/manageRole?action=deleteuser&rName=SECURITY_ADMIN""",""User: administrator cannot be removed from role"",0,10000 
Verify if administrator still being assigned to SECURITY_ADMIN role in OpenIDM,sc1,curl,"--header ""X-Requested-With: XMLHttpRequest"" -b COOKIE_FILE --cacert /ericsson/tor/data/certificates/sso/ssoserverapache.crt https://HTTPD_HOST_NAME/openidm/managed/role/SECURITY_ADMIN","administrator",0,10000
Verify if administrator still being assigned to SECURITY_ADMIN role in OpenDJ,sc1,ldapsearch,"-p 1636 --useSSL --trustAll -D ""cn=directory manager"" -w OPENDJ_ADMIN_PASSWORD -b ""ou=roles,COM_INF_LDAP_ROOT_SUFFIX"" cn=SECURITY_ADMIN","uniqueMember: uid=administrator,ou=People",0,10000
Verify removing administrator from ADMINISTRATOR role,sc1,curl,"--header ""X-Requested-With: XMLHttpRequest"" --header ""X-Usernames: administrator"" -b COOKIE_FILE --cacert /ericsson/tor/data/certificates/sso/ssoserverapache.crt --request GET ""https://HTTPD_HOST_NAME/openidm/endpoint/manageRole?action=deleteuser&rName=ADMINISTRATOR""","""User: administrator cannot be removed from role: ADMINISTRATOR""",0,10000
Verify if administrator still being assigned to ADMINISTRATOR role in OpenIDM,sc1,curl,"--header ""X-Requested-With: XMLHttpRequest"" -b COOKIE_FILE --cacert /ericsson/tor/data/certificates/sso/ssoserverapache.crt https://HTTPD_HOST_NAME/openidm/managed/role/ADMINISTRATOR","administrator",0,10000
Verify if administrator still being assigned to ADMINISTRATOR role in OpenDJ,sc1,ldapsearch,"-p 1636 --useSSL --trustAll -D ""cn=directory manager"" -w OPENDJ_ADMIN_PASSWORD -b ""ou=roles,COM_INF_LDAP_ROOT_SUFFIX"" cn=ADMINISTRATOR","uniqueMember: uid=administrator,ou=People",0,10000
Verify deleting user admin1,sc1,curl,"--header ""If-Match:\""*\"""" --header ""X-Requested-With: XMLHttpRequest"" -b COOKIE_FILE --cacert /ericsson/tor/data/certificates/sso/ssoserverapache.crt --request DELETE ""https://HTTPD_HOST_NAME/openidm/managed/user/admin1""","",0,10000
Verify deleting user admin2,sc1,curl,"--header ""If-Match:\""*\"""" --header ""X-Requested-With: XMLHttpRequest"" -b COOKIE_FILE --cacert /ericsson/tor/data/certificates/sso/ssoserverapache.crt --request DELETE ""https://HTTPD_HOST_NAME/openidm/managed/user/admin2""","",0,10000
Verify if user admin1 is deleted,sc1,curl,"--header ""X-Requested-With: XMLHttpRequest"" -b COOKIE_FILE --cacert /ericsson/tor/data/certificates/sso/ssoserverapache.crt --request GET  ""https://HTTPD_HOST_NAME/openidm/managed/user/admin1""","""error"":404,""reason"":""Not Found""",0,10000
Verify if user admin2 is deleted,sc1,curl,"--header ""X-Requested-With: XMLHttpRequest"" -b COOKIE_FILE --cacert /ericsson/tor/data/certificates/sso/ssoserverapache.crt --request GET  ""https://HTTPD_HOST_NAME/openidm/managed/user/admin2""","""error"":404,""reason"":""Not Found""",0,10000
