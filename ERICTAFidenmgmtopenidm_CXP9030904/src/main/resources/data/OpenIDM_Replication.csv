step,host,command,args,expectedOut,expectedExit,timeout
Login and obtain cookie on SC1 to access openIDM,sc1,curl,"-c COOKIE_FILE --cacert /ericsson/tor/data/certificates/sso/ssoserverapache.crt -X POST ""https://HTTPD_HOST_NAME/login"" -d IDToken1=administrator -d IDToken2=OPENIDM_ADMIN_PASSWORD","",0,10000
Login and obtain cookie on SC2 to access openIDM,sc2,curl,"-c COOKIE_FILE --cacert /ericsson/tor/data/certificates/sso/ssoserverapache.crt -X POST ""https://HTTPD_HOST_NAME/login"" -d IDToken1=administrator -d &IDToken2=OPENIDM_ADMIN_PASSWORD","",0,10000
Create a new user in openIDM from SC1,sc1,curl,"--header ""X-Requested-With: XMLHttpRequest"" -b COOKIE_FILE --cacert /ericsson/tor/data/certificates/rootCA.pem --request PUT --data '{""userName"":""joan"", ""firstName"":""joan"", ""lastName"":""smith"", ""email"":""joan@example.com"", ""password"":""TestPassw0rd"", ""userType"":""enmUser"", ""status"":""Enabled""}' https://HTTPD_HOST_NAME:8445/openidm/managed/user/joan","{""_id"":""joan"",""_rev"":""0""}",0,10000
Change user's password reset state to false in openIDM from sc2,sc2,curl,"-b COOKIE_FILE --cacert /ericsson/tor/data/certificates/sso/ssoserverapache.crt --header ""X-Requested-With: XMLHttpRequest"" --request POST -d '[""joan""]' ""https://HTTPD_HOST_NAME/openidm/endpoint/passwordReset?state=false""","""_id"":""joan""",0,10000
Obtain a cookie for joan on SC2 to Verify user creation,sc2,curl,"-c /tmp/joanTafCookie.txt --cacert /ericsson/tor/data/certificates/sso/ssoserverapache.crt -X POST ""https://HTTPD_HOST_NAME/login"" -d IDToken1=joan -d IDToken2=TestPassw0rd","",0,10000
Verify login to OpenDJ from SC2 by non-admin user successfully,sc2,ldapsearch,"-p 1636 --useSSL --trustAll -D ""uid=joan,ou=people,COM_INF_LDAP_ROOT_SUFFIX"" -w TestPassw0rd -b ""ou=people,COM_INF_LDAP_ROOT_SUFFIX"" uid=joan","dn: uid=joan,ou=People",0,10000
Verify if non-admin user has access to query its own record in OpenIDM on SC2,sc2,curl,"--header ""X-Requested-With: XMLHttpRequest"" -b /tmp/joanTafCookie.txt --cacert /ericsson/tor/data/certificates/rootCA.pem --request GET  ""https://HTTPD_HOST_NAME:8445/openidm/managed/user/joan""","""userName"":""joan""",0,10000
Edit an existing user in openIDM with a new valid email from SC2,sc2,curl,"--header ""X-Requested-With: XMLHttpRequest"" -b COOKIE_FILE --cacert /ericsson/tor/data/certificates/rootCA.pem --request POST -d '[{""replace"":""email"", ""value"": ""joan_new@example.com""}]' ""https://HTTPD_HOST_NAME:8445/openidm/managed/user?_action=patch&_queryId=for-userName&uid=joan""","",0,10000
Verify email being updated from SC1,sc1,curl,"--header ""X-Requested-With: XMLHttpRequest"" -b COOKIE_FILE --cacert /ericsson/tor/data/certificates/rootCA.pem --request GET  ""https://HTTPD_HOST_NAME:8445/openidm/managed/user/joan""","joan_new@example.com",0,10000
Delete the user from SC2,sc2,curl,"--header ""If-Match:\""*\"""" --header ""X-Requested-With: XMLHttpRequest"" -b COOKIE_FILE --cacert /ericsson/tor/data/certificates/rootCA.pem --request DELETE ""https://HTTPD_HOST_NAME:8445/openidm/managed/user/joan""","",0,10000
Check if the user is deleted in openidm on SC1,sc1,curl,"--header ""X-Requested-With: XMLHttpRequest"" -b COOKIE_FILE --cacert /ericsson/tor/data/certificates/sso/ssoserverapache.crt --request GET ""https://HTTPD_HOST_NAME/openidm/managed/user/joan""","""error"":404,""reason"":""Not Found""",0,10000
Verify if the user is deleted from openDJ on SC1,sc1,ldapsearch,"-p 1636 --useSSL --trustAll -D ""cn=directory manager"" -w OPENDJ_ADMIN_PASSWORD -b ""ou=people,COM_INF_LDAP_ROOT_SUFFIX"" uid=joan",,0,10000
Verify Create a user ftectrep1 in openIDM in SC1,sc1,curl,"--header ""X-Requested-With: XMLHttpRequest"" -b COOKIE_FILE --cacert /ericsson/tor/data/certificates/rootCA.pem --request PUT --data '{""userName"":""ftectrep1"", ""firstName"":""ftectrep1"", ""lastName"":""ftech"", ""email"":""ftectrep1@example.com"", ""password"":""TestPassw0rd1"", ""userType"":""enmUser"", ""status"":""Enabled""}' https://HTTPD_HOST_NAME:8445/openidm/managed/user/ftectrep1","{""_id"":""ftectrep1"",""_rev"":""0""}",0,10000
Verify if user ftectrep1 is created in openDJ from SC2,sc2,ldapsearch,"-p 1636 --useSSL --trustAll -D ""cn=directory manager"" -w OPENDJ_ADMIN_PASSWORD -b ""ou=people,COM_INF_LDAP_ROOT_SUFFIX"" uid=ftectrep1","dn: uid=ftectrep1,ou=People",0,10000
Verify assigning ftectrep1 to FIELD_TECHNICIAN role from SC2,sc2,curl,"--header ""X-Requested-With: XMLHttpRequest"" --header ""X-Usernames: ftectrep1"" -b COOKIE_FILE --cacert /ericsson/tor/data/certificates/rootCA.pem --request GET ""https://HTTPD_HOST_NAME:8445/openidm/endpoint/manageRole?action=adduser&rName=FIELD_TECHNICIAN""","""_id"":""FIELD_TECHNICIAN"",""_rev""",0,10000 
Verify if ftectrep1 being a member of FIELD_TECHNICIAN in OpenIDM from SC1,sc1,curl,"--header ""X-Requested-With: XMLHttpRequest"" -b COOKIE_FILE --cacert /ericsson/tor/data/certificates/rootCA.pem https://HTTPD_HOST_NAME:8445/openidm/managed/user/ftectrep1","""isMemberOf"":""FIELD_TECHNICIAN""",0,10000
Verify unassigning ftectrep1 from FIELD_TECHNICIAN role from SC2,sc2,curl,"--header ""X-Requested-With: XMLHttpRequest"" --header ""X-Usernames: ftectrep1"" -b COOKIE_FILE --cacert /ericsson/tor/data/certificates/rootCA.pem --request GET ""https://HTTPD_HOST_NAME:8445/openidm/endpoint/manageRole?action=deleteuser&rName=FIELD_TECHNICIAN""","""_id"":""FIELD_TECHNICIAN"",""_rev""",0,10000
Verify user ftectrep1 deletion succeeds from SC2,sc2,curl,"--header ""If-Match:\""*\"""" --header ""X-Requested-With: XMLHttpRequest"" -b COOKIE_FILE --cacert /ericsson/tor/data/certificates/rootCA.pem --request DELETE ""https://HTTPD_HOST_NAME:8445/openidm/managed/user/ftectrep1""","",0,10000
